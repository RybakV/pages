<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>LZE | Quests</title>
    <link rel="shortcut icon" href="./favicon.png" type="image/x-icon">
</head>
<body>
    <div class="container">
        <div class="map" id="map">
            <img src="./images/map2.svg" class="map-image" alt="Map">
            <div class="room-names">
                <div class="room well">Well</div>
                <div class="room server-room">Server Room</div>
            </div>
        </div>
        <div class="controls" id="controls"></div>
    </div>
</body>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Arsenal:ital,wght@0,400;0,700;1,400;1,700&family=Jura:wght@300..700&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap');
    body{
        background-color: #000;
        color: #87B0B2;
        font-size: 24px;
        font-family: "Jura", sans-serif;
        font-optical-sizing: auto;
        font-weight: 700;
        font-style: normal;
    }
    * {
        box-sizing: border-box;
        outline: none !important;
    }
    img {
        max-width: 100%;
    }
    a {
        color: #3fffff;
    }
    input[type="checkbox"] {
        width: 32px;
        height: 32px;
    }
    .container {
        display: flex;
        gap: 40px;
        align-items: flex-start;
    }
    @media (max-width: 767px) {
        .container {
            flex-direction: column;
        }
    }
    .map {
        position: relative;
        width: 50%;
        aspect-ratio: 1 / 1;
        background-color: #000B11;
        overflow: hidden;
        display: flex;
        align-items: flex-start;
    }
    @media (max-width: 767px) {
        .map {
            width: 100%;
        }
    }
    .map-image {
        display: block;
    }
    .quest-item {
        position: absolute;
        z-index: 2;
        top: 2%;
        left: 2%;
        width: 40px;
        height: 40px;
        margin: -12px 0 0 -12px;
        transform-origin: 50% 50%;
        opacity: 0;
        border-radius: 50%;
        transition: .2s;
        background-color: #0006;
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
    }
    .quest-item.active {
        opacity: 1;
    }
    .quest-item.active:hover {
        transform: scale(2);
    }
    .quest-item::before {
        content:'';
        display: block;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: absolute;
        top: 0;
        left: 0;
        border: 1px dashed #3fffff;
        animation: rotation 15s infinite linear;
    }
    @keyframes rotation {
        0% {transform: rotate(0deg);}
        100% {transform: rotate(360deg);}
    }
    .quest-item img {
        width: 100%;
        height: auto;
        border-radius: 50%;
        opacity: 1;
    }
/*
    #lost-footage-icon {
        top: 76%;
        left: 31%;
    }
    #explosive-retrieval-icon {
        top: 79%;
        left: 19%;
    }
    #hiidden-secrets-icon {
        top: 52%;
        left: 42%;
    }
    #lucky-cap-icon {
        top: 21%;
        left: 76%;
    }
    #piggy-bank-icon {
        top: 19%;
        left: 86%;
    }
    #gold-bar-icon {
        top: 56.5%;
        left: 50.5%;
    }
    #liquid-gold-icon {
        top: 32%;
        left: 80%;
    }
*/
    /* CONTROLS */
    .controls {
        width: 50%;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: flex-start;
        align-items: stretch;
        align-content: flex-start;
    }
    @media (max-width: 767px) {
        .controls {
            width: 100%;
        }
    }
    .toggle-group * {
        pointer-events: none;
        text-align: center;
    }
    .toggle-group {
        transition: .2s;
        padding: 4px;
        cursor: pointer;
        font-size: 14px;
        width: 120px;
    }
    .toggle-group:hover {
        background-color: #001825;
    }
    .toggle-group.active {
        box-shadow: inset 0 0 0 2px #3fffff;
        background-color: #000b11;
    }
    .toggle-group[disabled]{
        opacity: .5;
        color: #8b2f2f;
        cursor: not-allowed;
    }
    .toggle-group[disabled].active {
        box-shadow: inset 0 0 0 2px #8b2f2f;
    }
    .thumbnail {
        width: 100%;
        aspect-ratio: 1;
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
    }
    .room-names {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
    }
    .room {
        position: absolute;
        font-size: .6vw;
        width: 3%;
    }
    @media (max-width: 767px) {
        font-size: 1.2vw;
    }
    .well {
        top: 37.5%;
        left: 37.5%;
    }
    .server-room {
        top: 52%;
        left: 41.6%;
    }
</style>
<script>
    const questsData = {
        airQualityControl: {
            alias: 'air-quality-control',
            questName: 'Air Quality Control',
            itemName: 'Atmospheric Analyzer',
            x: 0,
            y: 0,
        },
        blueHorizons: {
            alias: 'blue-horizons',
            questName: 'Blue Horizons',
            itemName: 'Secret Weapon Blueprint',
            x: 0,
            y: 0,
        },
        clearSignal: {
            alias: 'clear-signal',
            questName: 'Clear Signal',
            itemName: 'Radio-Comm Device',
            x: 0,
            y: 0,
        },
        communicationHub: {
            alias: 'communication-hub',
            questName: 'Communication Hub',
            itemName: '-',
            x: 0,
            y: 0,
        },
        confidentialRetrieval: {
            alias: 'confidential-retrieval',
            questName: 'Confidential Retrieval',
            itemName: 'Classified Documents',
            x: 0,
            y: 0,
        },
        doghowlTrophy: {
            alias: 'doghowl-trophy',
            questName: 'Doghowl Trophy',
            itemName: 'Howling Dog Statue',
            x: 0,
            y: 0,
        },
        explosiveBlueprint: {
            alias: 'explosive-blueprint',
            questName: 'Explosive Blueprint',
            itemName: 'Granade Blueprint',
            x: 67,
            y: 36,
        },
        explosiveRetrieval: {
            alias: 'explosive-retrieval',
            questName: 'Explosive Retrieval',
            itemName: 'Bomb',
            x: 19,
            y: 79,
        },
        eyesEverywhere: {
            alias: 'eyes-everywhere',
            questName: 'Eyes Everywhere',
            itemName: 'Surveillance Box',
            x: 0,
            y: 0,
        },
        glimmeringGem: {
            alias: 'glimmering-gem',
            questName: 'Glimmering Gem',
            itemName: 'Crystal',
            x: 0,
            y: 0,
        },
        goldenOpportunity: {
            alias: 'golden-opportunity',
            questName: 'Golden Opportunity',
            itemName: 'Gold Bar',
            x: 50.5,
            y: 56.5,
        },
        hiddenSecrets: {
            alias: 'hidden-secrets',
            questName: 'Hidden Secrets',
            itemName: 'Server Drive',
            x: 42,
            y: 52,
        },
        identityBand: {
            alias: 'identity-band',
            questName: 'Identity Band',
            itemName: 'Researcher\'s Wristband',
            x: 0,
            y: 0,
        },
        liquidGold: {
            alias: 'liquid-gold',
            questName: 'Liquid Gold',
            itemName: 'Bottle of Expensive Alcohol',
            x: 80,
            y: 32,
        },
        lockerKey: {
            alias: 'locker-key',
            questName: 'Locker Key',
            itemName: 'Locker Key',
            x: 0,
            y: 0,
        },
        lostFootage: {
            alias: 'lost-footage',
            questName: 'Lost Footage',
            itemName: 'Experiment Film Container',
            x: 31,
            y: 76,
        },
        luckyCap: {
            alias: 'lucky-cap',
            questName: 'Lucky Cap',
            itemName: 'Orange Hat',
            x: 76,
            y: 21,
        },
        nightVision: {
            alias: 'night-vision',
            questName: 'Night Vision',
            itemName: 'Thermal Imaging Goggles',
            x: 0,
            y: 0,
        },
        patternAnalysis: {
            alias: 'pattern-analysis',
            questName: 'Pattern Analysis',
            itemName: 'Key with Unique Patterns',
            x: 0,
            y: 0,
        },
        personalInsights: {
            alias: 'personal-insights',
            questName: 'Personal Insights',
            itemName: 'Personal Log Device',
            x: 0,
            y: 0,
        },
        piggyBank: {
            alias: 'piggy-bank',
            questName: '-',
            itemName: 'Piggy Bank',
            x: 86,
            y: 19,
        },
        planetWithName: {
            alias: 'planet-with-name',
            questName: 'Planet with Name',
            itemName: 'Glass Planet',
            x: 0,
            y: 0,
        },
        powerPlay: {
            alias: 'power-play',
            questName: 'Power Play',
            itemName: 'Broken Backup Power Controller Device',
            x: 0,
            y: 0,
        },
        powerSource: {
            alias: 'power-source',
            questName: 'Power Source',
            itemName: 'Solar Charger',
            x: 0,
            y: 0,
        },
        powerSource2: {
            alias: 'power-source2',
            questName: 'Power Source',
            itemName: 'Energy Cell',
            x: 48,
            y: 18,
        },
        prestigiousAward: {
            alias: 'prestigious-award',
            questName: 'Prestigious Award',
            itemName: 'Next Fest #2 Award',
            x: 58.5,
            y: 65,
        },
        probingTheUnknown: {
            alias: 'probing-the-unknown',
            questName: 'Probing the Unknown',
            itemName: '-',
            x: 0,
            y: 0,
        },
        radiationAnalysis: {
            alias: 'radiation-analysis',
            questName: 'Radiation Analysis',
            itemName: 'Radiation Analyzer',
            x: 0,
            y: 0,
        },
        safeKey: {
            alias: 'safe-key',
            questName: 'Safe Key',
            itemName: 'Safe Key',
            x: 0,
            y: 0,
        },
        secretsInRed: {
            alias: 'secrets-in-red',
            questName: 'Secrets in Red',
            itemName: 'Red Diary',
            x: 0,
            y: 0,
        },
        silentCommunication: {
            alias: 'silent-communication',
            questName: 'Silent Communication',
            itemName: 'Comm-Link Headset',
            x: 45.5,
            y: 85,
        },
    }
    const controlsParent = document.querySelector('#controls');
    const map = document.querySelector('#map');
    const mapQuestItems = document.querySelector('.quest-item');
    controlsParent.addEventListener('click', updateMap);


    /* GENERATE CONTROL ITEMS AND MAP MARKERS */
    function genData(){
        /* Controls */
        Object.entries(questsData).forEach(([key, itemData]) => {
            const toggleGroup = document.createElement('div');
            toggleGroup.classList.add('toggle-group');
            toggleGroup.setAttribute('id', `${itemData.alias}`);

            // ADD item thumbnail
            const thumbnailBox = document.createElement('div');
            thumbnailBox.classList.add('thumbnail');
            const url = `url('./images/${itemData.alias}.png')`;
            thumbnailBox.setAttribute('style', `background-image: ${url}`);
            toggleGroup.append(thumbnailBox);

            // ADD item name
            const groupName = document.createElement('div');
            groupName.innerText = itemData.questName;
            toggleGroup.append(groupName);

            //DISABLED items
            if (itemData.x === 0) {
                toggleGroup.setAttribute('disabled','');
            }

            controlsParent.append(toggleGroup);
        });
        /* Map Markers */
        Object.entries(questsData).forEach(([key, itemData]) => {
            const mapMarker = document.createElement('div');
            mapMarker.classList.add('quest-item');
            mapMarker.setAttribute('id', `${itemData.alias}-icon`);
            const url = `url('./images/${itemData.alias}.png')`;
            // mapMarker.setAttribute('style', `background-image: ${url}`);
            mapMarker.style.cssText = `
                  background-image: ${url};
                  left: ${itemData.x}%;
                  top: ${itemData.y}%;
                `;

            map.append(mapMarker);
        });

    }
    genData();





    function updateMap(event){
        const target = event.target;
        if (target.classList.contains('toggle-group')){
            let targetName = target.getAttribute('id');
            let targetNodeId = '#'+targetName+'-icon'
            let targetNode = document.querySelector(targetNodeId);
            targetNode.classList.toggle('active');
            target.classList.toggle('active');
        }
    }
    // function updateMap(event){
    //     const target = event.target;
    //     if (target.classList.contains('checkbox')){
    //         let targetName = target.getAttribute('id');
    //         let targetNodeId = '#'+targetName+'-icon'
    //         let targetNode = document.querySelector(targetNodeId);
    //         targetNode.classList.toggle('active');
    //     }
    // }
</script>
</html>