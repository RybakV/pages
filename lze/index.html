<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>LZE | Quests</title>
    <link rel="shortcut icon" href="./favicon.png" type="image/x-icon">
</head>
<body>
    <div class="container">
        <div class="map" id="map">
            <img src="./images/map3.svg" class="map-image" alt="Map">
            <div class="room-names">
                <div class="room well">Well</div>
                <div class="room server-room">Server Room</div>
                <div class="sector sector-a">Sector A</div>
                <div class="sector sector-b">Sector B</div>
                <div class="sector sector-c">Sector C</div>
            </div>
            <button onclick="mapClear()" id="map-clear">ðŸ—™ Clear Map</button>
        </div>
        <div class="controls" id="controls">
            <div class="searchbar">
                <input type="text" id="searchInput" onkeyup="searchFunction()" placeholder="Search Quest or Item..." title="Type in a name">
            </div>
        </div>
    </div>
</body>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Arsenal:ital,wght@0,400;0,700;1,400;1,700&family=Jura:wght@300..700&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap');
    body{
        background-color: #000;
        color: #87B0B2;
        font-size: 24px;
        font-family: "Jura", sans-serif;
        font-optical-sizing: auto;
        font-weight: 700;
        font-style: normal;
        margin: 0;
        padding: 20px;
    }
    * {
        box-sizing: border-box;
        outline: none !important;
    }
    img {
        max-width: 100%;
    }
    a {
        color: #3fffff;
    }
    p {
        margin: 0;
    }
    input[type="checkbox"] {
        width: 32px;
        height: 32px;
    }
    .container {
        display: flex;
        gap: 20px;
        align-items: flex-start;
    }
    @media (max-width: 767px) {
        .container {
            flex-direction: column;
        }
    }
    .map {
        position: relative;
        width: 50%;
        aspect-ratio: 1 / 1;
        background-color: #000B11;
        overflow: hidden;
        display: flex;
        align-items: flex-start;
    }
    @media (max-width: 767px) {
        .map {
            width: 100%;
        }
    }
    .map-image {
        display: block;
    }
    .quest-item {
        position: absolute;
        z-index: 2;
        top: 2%;
        left: 2%;
        width: 40px;
        height: 40px;
        margin: -12px 0 0 -12px;
        transform-origin: 50% 50%;
        opacity: 0;
        border-radius: 50%;
        transition: .2s;
        background-color: #0006;
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
    }
    .quest-item.active {
        opacity: 1;
    }
    .quest-item.active:hover {
        transform: scale(2);
    }
    .quest-item::before {
        content:'';
        display: block;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: absolute;
        top: 0;
        left: 0;
        border: 1px dashed #3fffff;
        animation: rotation 15s infinite linear;
    }
    @keyframes rotation {
        0% {transform: rotate(0deg);}
        100% {transform: rotate(360deg);}
    }
    .quest-item img {
        width: 100%;
        height: auto;
        border-radius: 50%;
        opacity: 1;
    }
    #map-clear {
        position: absolute;
        bottom: 0;
        right: 0;
        background: #000b11;
        border: 2px solid #02373d;
        color: #02373d;
        font-size: 24px;
        font-family: "Jura", sans-serif;
        font-optical-sizing: auto;
        font-weight: 700;
        cursor: pointer;
        padding: 0 8px 4px;
        transition: .2s;
    }
    #map-clear:hover {
        border: 2px solid #87B0B2;
        color: #87B0B2;
    }
    /* CONTROLS */
    .controls {
        width: 50%;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: flex-start;
        align-items: stretch;
        align-content: flex-start;
    }
    @media (max-width: 767px) {
        .controls {
            width: 100%;
        }
    }
    .searchbar {
        width: 100%;
    }
    .searchbar input {
        padding: 8px 16px;
        background: #000b11;
        border: 2px solid #02373d;
        transition: .2s;
        width: 100%;
        color: #87B0B2;
        font-size: 24px;
        font-family: "Jura", sans-serif;
        font-optical-sizing: auto;
        font-weight: 700;
    }
    .searchbar input:focus {
        border: 2px solid #87B0B2;
    }
    .searchbar input::placeholder {
        color: #02373d;
    }
    .toggle-group * {
        pointer-events: none;
    }
    .toggle-group {
        transition: .2s;
        padding: 3px 4px 4px 70px;
        cursor: pointer;
        font-size: 14px;
        background-color: #22343d;
        display: flex;
        position: relative;
        height: 62px;
        flex-direction: column;
        width: calc(33% - 3px);
        min-width: 240px;
        align-items: flex-start;
        text-align: left;
        justify-content: center;
    }
    .toggle-group:hover {
        background-color: #284d5f;
    }
    .toggle-group.active {
        box-shadow: inset 0 0 0 2px #3fffff;
    }
    .toggle-group[disabled]{
        color: #8b2f2f;
        cursor: not-allowed;
        background-color: #230a0e;
    }
    .toggle-group[disabled].active {
        box-shadow: inset 0 0 0 2px #8b2f2f;
    }
    .toggle-group span {
        display: block;
    }
    .thumbnail {
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        aspect-ratio: 1;
    }
    .room-names {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
    }
    .room {
        position: absolute;
        font-size: .6vw;
        width: 3%;
    }
    .sector {
        position: absolute;
        font-size: 1.6vw;
        text-transform: uppercase;
    }
    .sector-a {
        right: 14%;
        bottom: 10%;
    }
    .sector-b {
         left: 7%;
         bottom: 32%;
     }
    .sector-c {
        right: 27%;
        top: 8%;
    }
    @media (max-width: 767px) {
        .room {
            font-size: 1.2vw;
        }
        .sector {
            font-size: 3.2vw;
        }
    }
    .well {
        top: 37.5%;
        left: 37.5%;
    }
    .server-room {
        top: 52%;
        left: 41.6%;
    }
</style>
<script>
    const questsData = {

        airQualityControl: {
            alias: 'air-quality-control',
            questName: 'Air Quality Control',
            itemName: 'Atmospheric Analyzer',
            x: 65,
            y: 83,
        },
        blueHorizons: {
            alias: 'blue-horizons',
            questName: 'Blue Horizons',
            itemName: 'Secret Weapon Blueprint',
            x: 71,
            y: 41,
        },
        clearSignal: {
            alias: 'clear-signal',
            questName: 'Clear Signal',
            itemName: 'Radio-Comm Device',
            x: 0,
            y: 0,
        },
        communicationHub: {
            alias: 'communication-hub',
            questName: 'Communication Hub',
            itemName: 'Radio-Comm Station',
            x: 0,
            y: 0,
        },
        confidentialRetrieval: {
            alias: 'confidential-retrieval',
            questName: 'Confidential Retrieval',
            itemName: 'Classified Documents',
            x: 28,
            y: 32,
        },
        doghowlTrophy: {
            alias: 'doghowl-trophy',
            questName: 'Doghowl Trophy',
            itemName: 'Howling Dog Statue',
            x: 89,
            y: 54,
        },
        echoesOfTheUnknown: {
            alias: 'echoes-of-the-unknown',
            questName: 'Echoes of the Unknown',
            itemName: 'Analog Data Tape',
            x: 58,
            y: 61,
        },
        explosiveBlueprint: {
            alias: 'explosive-blueprint',
            questName: 'Explosive Blueprint',
            itemName: 'Granade Blueprint',
            x: 67,
            y: 36,
        },
        explosiveRetrieval: {
            alias: 'explosive-retrieval',
            questName: 'Explosive Retrieval',
            itemName: 'Bomb',
            x: 19,
            y: 79,
        },
        eyesEverywhere: {
            alias: 'eyes-everywhere',
            questName: 'Eyes Everywhere',
            itemName: 'Surveillance Box',
            x: 45,
            y: 77,
        },
        glimmeringGem: {
            alias: 'glimmering-gem',
            questName: 'Glimmering Gem',
            itemName: 'Crystal',
            x: 85,
            y: 42,
        },
        goldenOpportunity: {
            alias: 'golden-opportunity',
            questName: 'Golden Opportunity',
            itemName: 'Gold Bar',
            x: 50.5,
            y: 56.5,
        },
        hiddenSecrets: {
            alias: 'hidden-secrets',
            questName: 'Hidden Secrets',
            itemName: 'Server Drive',
            x: 42,
            y: 52,
        },
        identityBand: {
            alias: 'identity-band',
            questName: 'Identity Band',
            itemName: 'Researcher\'s Wristband',
            x: 22.5,
            y: 50.5,
        },
        liquidGold: {
            alias: 'liquid-gold',
            questName: 'Liquid Gold',
            itemName: 'Bottle of Expensive Alcohol',
            x: 80,
            y: 32,
        },
        lockerKey: {
            alias: 'locker-key',
            questName: 'Locker Key',
            itemName: 'Locker Key',
            x: 0,
            y: 0,
        },
        lostFootage: {
            alias: 'lost-footage',
            questName: 'Lost Footage',
            itemName: 'Experiment Film Container',
            x: 31,
            y: 76,
        },
        luckyCap: {
            alias: 'lucky-cap',
            questName: 'Lucky Cap',
            itemName: 'Orange Hat',
            x: 76,
            y: 21,
        },
        nightVision: {
            alias: 'night-vision',
            questName: 'Night Vision',
            itemName: 'Thermal Imaging Goggles',
            x: 60,
            y: 59,
        },
        patternAnalysis: {
            alias: 'pattern-analysis',
            questName: 'Pattern Analysis',
            itemName: 'Key with Unique Patterns',
            x: 62,
            y: 14,
        },
        personalInsights: {
            alias: 'personal-insights',
            questName: 'Personal Insights',
            itemName: 'Personal Log Device',
            x: 70.5,
            y: 40,
        },
        piggyBank: {
            alias: 'piggy-bank',
            questName: 'Hidden Data',
            itemName: 'Piggy Bank',
            x: 86,
            y: 19,
        },
        planetWithName: {
            alias: 'planet-with-name',
            questName: 'Planet with Name',
            itemName: 'Glass Planet',
            x: 30,
            y: 29,
        },
        powerPlay: {
            alias: 'power-play',
            questName: 'Power Play',
            itemName: 'Broken Backup Power Controller Device',
            x: 0,
            y: 0,
        },
        powerSource: {
            alias: 'power-source',
            questName: 'Power Source',
            itemName: 'Solar Charger',
            x: 31,
            y: 51,
        },
        powerSource2: {
            alias: 'power-source2',
            questName: 'Power Source',
            itemName: 'Energy Cell',
            x: 48,
            y: 18,
        },
        prestigiousAward: {
            alias: 'prestigious-award',
            questName: 'Prestigious Award',
            itemName: 'Next Fest #2 Award',
            x: 58.5,
            y: 65,
        },
        probingTheUnknown: {
            alias: 'probing-the-unknown',
            questName: 'Probing the Unknown',
            itemName: 'Alien Matter Probe',
            x: 34,
            y: 72,
        },
        radiationAnalysis: {
            alias: 'radiation-analysis',
            questName: 'Radiation Analysis',
            itemName: 'Radiation Analyzer',
            x: 84,
            y: 18,
        },
        safeKey: {
            alias: 'safe-key',
            questName: 'Safe Key',
            itemName: 'Safe Key',
            x: 43,
            y: 65,
        },
        secretsInRed: {
            alias: 'secrets-in-red',
            questName: 'Secrets in Red',
            itemName: 'Red Diary',
            x: 46,
            y: 41,
        },
        smokeAndMirrors: {
            alias: 'smoke-and-mirrors',
            questName: 'Smoke and Mirrors',
            itemName: '20 Pack of Cigarettes',
            x: 45,
            y: 17,
        },
        silentCommunication: {
            alias: 'silent-communication',
            questName: 'Silent Communication',
            itemName: 'Comm-Link Headset',
            x: 45.5,
            y: 85,
        },
        temporalSchematics: {
            alias: 'temporal-schematics',
            questName: 'Temporal Schematics',
            itemName: 'Time Machine Blueprints',
            x: 38,
            y: 38,
        },
    }
    const controlsParent = document.querySelector('#controls');
    const map = document.querySelector('#map');
    controlsParent.addEventListener('click', updateMap);


    /* GENERATE CONTROL ITEMS AND MAP MARKERS */
    function genData(){
        /* Controls */
        Object.entries(questsData).forEach(([key, itemData]) => {
            const toggleGroup = document.createElement('div');
            toggleGroup.classList.add('toggle-group');
            toggleGroup.setAttribute('id', `${itemData.alias}`);

            // ADD item thumbnail
            const thumbnailBox = document.createElement('div');
            thumbnailBox.classList.add('thumbnail');
            const url = `url('./images/${itemData.alias}.png')`;
            thumbnailBox.setAttribute('style', `background-image: ${url}`);
            toggleGroup.append(thumbnailBox);

            // ADD quest name
            const questName = document.createElement('p');
            questName.innerText = itemData.questName;
            toggleGroup.append(questName);

            // ADD item name
            const itemName = document.createElement('span');
            itemName.innerText = itemData.itemName;
            toggleGroup.append(itemName);

            //DISABLED items
            if (itemData.x === 0) {
                toggleGroup.setAttribute('disabled','');
            }

            controlsParent.append(toggleGroup);
        });
        /* Map Markers */
        Object.entries(questsData).forEach(([key, itemData]) => {
            const mapMarker = document.createElement('div');
            mapMarker.classList.add('quest-item');
            mapMarker.setAttribute('id', `${itemData.alias}-icon`);
            const url = `url('./images/${itemData.alias}.png')`;
            // mapMarker.setAttribute('style', `background-image: ${url}`);
            mapMarker.style.cssText = `
                  background-image: ${url};
                  left: ${itemData.x}%;
                  top: ${itemData.y}%;
                `;

            map.append(mapMarker);
        });

    }
    genData();

    function updateMap(event){
        const target = event.target;
        if (target.classList.contains('toggle-group')){
            let targetName = target.getAttribute('id');
            let targetNodeId = '#'+targetName+'-icon'
            let targetNode = document.querySelector(targetNodeId);
            targetNode.classList.toggle('active');
            target.classList.toggle('active');
        }
    }

    function searchFunction() {
        let input, filter, ul, li, textP, textSpan, i, txtValue, txtValue2;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        ul = document.getElementById("controls");
        li = ul.getElementsByClassName("toggle-group");
        for (i = 0; i < li.length; i++) {
            textP = li[i].getElementsByTagName("p")[0];
            textSpan = li[i].getElementsByTagName("span")[0];
            txtValue = textP.textContent || textP.innerText;
            txtValue2 = textSpan.textContent || textSpan.innerText;

            if (txtValue.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
            } else {
                li[i].style.display = "none";
            }
        }
    }

    function mapClear() {
        const activeItems = document.querySelectorAll(".active");
        console.log('activeItems', activeItems);
        for (let i = 0; i < activeItems.length; i++) {
            activeItems[i].classList.remove("active");
        }
    }
</script>
</html>